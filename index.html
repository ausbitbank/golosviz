<!DOCTYPE html>
<html> <head>
  <title>golosviz : golos network realtime vizualisation</title>
  <meta name="description" content="golosviz displays all transactions on the steem network blockchain in real time."> <meta property="og:title" content="steem network realtime vizualisation"> <meta property="og:site_name" content="golosviz">
  <meta property="og:description" content="golosviz displays all transactions on the golos network blockchain in real time.">
  <meta charset="UTF-8">
  <script src="jquery.min.js"></script>
  <script src="steem.min.js"></script>
  <script src="https://www.promisejs.org/polyfills/promise-6.1.0.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Monoton|Iceland|Pacifico|Press+Start+2P|Audiowide|Vampiro+One' rel='stylesheet' type='text/css'>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
  <script src="remarkable.js"></script>
  <link href="steemviz.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">
    var txString; var followthetags = false;var showimages = true;var imageproxystatus=true;
    var imageproxy = 'https://imgp.golos.io/';
    var lastblocknum = 0;
    var lastpermlink;
    var defaultfollowthevoters = [ "hipster", "ausbitbank","jesta","applecrisp","someguy123","roelandp","pfunk","acidyo","vadbars"];
    var defaultfollowthetags = [ "golosviz"];
    var followthevoters = defaultfollowthevoters;
    var followthevoteshistory = [];
    var followthetags = false;
    var followthevotes = false;
    var followthecommentvotes = false;
    var showimages = true;
    var shownsfwimages = true;
    var AccountCount = 110000;
    var myusername = '';
    var gbd_print_rate_last = 50;
    var gbd_print_rate_color = 'green';
    var limitorderlastprice = 0.16;
    var postpreview = false;
    var postpreviewpinned = false;
    var bmtoggle = false;

    var md = new Remarkable();
    md.set({html: true,breaks: true,linkify: true,typographer: true});

    function stripHTML(dirtyString) {
      var container = document.createElement('div');
      var text = document.createTextNode(dirtyString);
      container.appendChild(text);
      containertext = container.innerHTML; // innerHTML will be an xss safe string
      return containertext;
    }

    function showimagestoggle() {
  if (showimages == false) {
    $("#showimagestoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    showimages = true;
  } else {
    $("#showimagestoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    showimages = false;
  }
}

function imageproxytoggle() {
  if (imageproxystatus == false) {
    $("#imageproxytoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    imageproxystatus = true
    var imageproxy = 'https://imgp.golos.io/100x100/';
  } else {
    $("#imageproxytoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    imageproxystatus = false
    imageproxy = "";
  }
  return true
}

function followthevotestoggle() {
  if (followthevotes == false) {
    $("#followthevotestoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    $("#followthevotestoggle2").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    followthevotes = true;
  } else {
    $("#followthevotestoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    $("#followthevotestoggle2").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    followthevotes = false;
  }
  console.log("Follow the votes toggled. Status: "+followthevotes+" for users "+followthevoters);
  return true;
}

function followthetagstoggle() {
  if (followthetags == false) {
    $("#followthetagstoggle2").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    followthetags = true;
  } else {
    $("#followthetagstoggle2").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    followthetags = false;
  }
  console.log("Follow the tags toggled. Status: "+followthetags+" for tags "+defaultfollowthetags);
  return true;
}

function followthecommentvotestoggle() {
  if (followthecommentvotes == false) {
    $("#followthecommentvotestoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    followthecommentvotes = true;
    if (followthevotes == false) {
      followthevotestoggle();
    }
  } else {
    $("#followthecommentvotestoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    followthecommentvotes = false;
  }
}

function postpreviewtoggle() {
  if (postpreview == false) {
    $("#postpreviewtoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    postpreview = true;
  } else {
    $("#postpreviewtoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    postpreview = false;
  }
}

function bmtoggler() {
  if (bmtoggle == false) {
    $("#bmtoggle").removeClass("fa fa-toggle-off").addClass("fa fa-toggle-on")
    bmtoggle = true;
  } else {
    $("#bmtoggle").removeClass("fa fa-toggle-on").addClass("fa fa-toggle-off")
    bmtoggle = false;
  }
}

function followthevotesconfigopen() {
  followthevoteslistusers();
  followthetagslisttags();
  $("#followthevotesconfigscreen").fadeIn("fast");
}

function followthevoteslistusers(){
  var userlisthtml = ['<ul>'];
  $.each(followthevoters, function(index, value) {
    userlisthtml.push('<li id="followthevoter-'+value+'"><small><a href="#" onclick="followthevotesremoveuser('+index+');"><i class="fa fa-times hovergrow" title="Remove user" style="color:red;" aria-hidden="true"></i></a> <a href="#" onclick="getVotes('+index+');"> <i class="fa fa-history hovergrow" title="Show voting history" aria-hidden="true" style="color:orange;"> </i>  ' + value + '</a></small></li>');
  });
  userlisthtml.push('</ul>');
  $("#followthevotesconfigscreenuserlist").fadeIn("fast").html(userlisthtml.join(""));
}

function followthetagslisttags(){
  var taglisthtml = ['<ul>'];
  $.each(defaultfollowthetags, function(index, value) {
    taglisthtml.push('<li id="followthetags-'+value+'"><small><a href="#" onclick="followthetagsremovetag('+index+');"><i class="fa fa-times hovergrow" title="Remove tag" style="color:red;" aria-hidden="true"></i></a>  <a href="https://steemit.com/created/'+value+'"><i class="fa fa-external-link-square" aria-hidden="true"></i> '+value+'</a></small></li>');
  });
  taglisthtml.push('</ul>');
  $("#followthevotesconfigscreentaglist").fadeIn("fast").html(taglisthtml.join(""));
}

function followthetagsaddtag() {
  tmpuserinput2 = document.getElementsByTagName("input")[0].value.toLowerCase();
  document.getElementsByTagName("input")[0].value = '';
  defaultfollowthetags.push(tmpuserinput2);
  followthetagslisttags();
  return true;
}

function followthetagsremovetag(index) {
  defaultfollowthetags.splice(index,1);
  followthetagslisttags();
}

function followthetagsclearlist() {
  defaultfollowthetags = [];
  followthetagslisttags();
}

function followthevoteslisthistory(){
  followthevoteshistoryhtml = ['<center><i class="fa fa-history" aria-hidden="true"></i> Vote History &nbsp <a href="#" onclick=\'followthevoteslsithistory();\'><i class="fa fa-refresh hovergrow" aria-hidden="true" style="color:green"></i></a> <a href="#" onclick=\'$("#followthevoteshistorycontainer").fadeOut("fast");\'><i class="fa fa-times hovergrow" title="Close" style="color:red;"> </i></a><br />'];
  $.each(followthevoteshistory, function(index, value) { followthevoteshistoryhtml.push('<a href="'+value+'">'+value+'</a><br />'); });
  $("#followthevoteshistorycontainer").html(followthevoteshistoryhtml.join(""));
  $("#followthevoteshistorycontainer").fadeIn("fast");
}


function followthevotesconfigclose() {$("#followthevotesconfigscreen").fadeOut("slow");}

function followthevotesadduser() {
  // Add new user to watchlist array
  tmpuserinput = document.getElementsByTagName("input")[1].value.toLowerCase();
  document.getElementsByTagName("input")[1].value = '';
  followthevoters.push(tmpuserinput);
  followthevoteslistusers();
  return true;
}

function readtime(a){var b=270,c=b/60,d=a.trim().split(/\s+/g).length,e=d/c,f=Math.round(e/60);Math.round(e-60*f);return f<1?"Less than a minute read":f+" min read"}

function setuser(){
  myusername = document.getElementsByTagName("input")[0].value.toLowerCase();
  console.log("username set to "+myusername);
}

function followthevotesremoveuser(index) {
  followthevoters.splice(index,1);
  followthevoteslistusers();
}

function followthevotesrestoredefaults() {
  followthevoters = [ "hipster", "ausbitbank","jesta","applecrisp","someguy123","roelandp","pfunk","acidyo","vadbars"];
  followthevoteslistusers();
}

function followthevotesclearlist() {
  followthevoters = [];
  followthevoteslistusers();
}

function emergencypurge() {
  if (showimages == true) {
  showimagestoggle();
  }
  $("img.postimage").remove();
}

function getAccountCount(){
  steem.api.getAccountCount(function(err, result) { AccountCount = result; $("#statsAccountCount").html(AccountCount); });
}

function getFollowers(account) {
  steem.api.getFollowers(account, 0, 'blog', 100, function(err, result) { console.log(err, result); });
}
function getVotes(voterindex){
  $("#votehistorycontainer").fadeIn("slow");
  $("#votehistoryholder").fadeIn("slow");
  voter = followthevoters[voterindex];
  $('#votehistoryholder').html('<center><h3>Loading vote history for '+voter+'  <a href="#" class="hovergrow" id="votehistoryclose" onclick=\'$("#votehistorycontainer").fadeOut("fast");\'><i class="fa fa-times" title="Close" style="color:red;"> </i></a></h3><br /><i class="fa fa-spin fa-spinner"> </i></center>');
  steem.api.getAccountVotes(voter, function(err, result) {
    var votehistory = result.slice(-200);
    var votelisthtml = ['<center><h3>Last '+votehistory.length+' votes by '+voter+'  <a href="#" class="hovergrow" id="votehistoryclose" onclick=\'$("#votehistorycontainer").fadeOut("fast");\'><i class="fa fa-times" title="Close" style="color:red;"> </i></h3></a></center><br /><ul id="votelist">'];
  $.each(votehistory.reverse(), function(index, value) {
    votelisthtml.push('<li><small>'+votehistory[index].time+' '+votehistory[index].percent/100+'%</small> <a href="https://golos.io/@'+votehistory[index].authorperm+'" target="_blank">@'+votehistory[index].authorperm.substring(0,40)+'</a></li>');
  });
  votelisthtml.push('</ul>');
  $("#votehistoryholder").html(votelisthtml.join(""));


  });
}

function setCookie(key, value) {
    var expires = new Date();
    expires.setTime(expires.getTime() + (1 * 24 * 60 * 60 * 1000));
    document.cookie = key + '=' + value + ';expires=' + expires.toUTCString();
}

function getCookie(key) {
    var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
    return keyValue ? keyValue[2] : null;
}

function getstats(){
  getAccountCount();
  steem.api.getDynamicGlobalProperties(function(err, result) {
    console.log(result);
    var block_number = result["last_irreversible_block_num"];
    if(lastblocknum != block_number) {
       lastblocknum = block_number;
       $("#blocknumber").html("<i class='fa fa-cube'> </i> "+lastblocknum);
       $("#currentwitness").html("<i class='fa fa-user-secret'> </i> <a href='https://golosdb.com/@"+result['current_witness']+"'>"+result['current_witness']+"</a>");
       $("#timestamp").html("<i class='fa fa-clock-o' aria-hidden='true'> </i>  "+result['time']);
       if (result["sbd_print_rate"] <= gbd_print_rate_last) { gbd_print_rate_color = "red"; } else { gbd_print_rate_color = "green"; }
       supplystatshtml = "<strong>Current GBG supply</strong> "+result["current_sbd_supply"]+" <br /> <strong>Current Golos supply</strong> "+result["current_supply"]+" <br /><strong>Average Block size</strong> "+result["average_block_size"]+" <br /><strong>GBD Print Rate</strong> <span color=\""+gbd_print_rate_color+"\">"+result["sbd_print_rate"]+"</span> <br /><strong>Votes regenerated per day</strong> "+result["vote_regeneration_per_day"]+" <br /><strong>Total reward fund golos</strong> "+result["total_reward_fund_steem"]+" <br /><strong>Total vesting fund</strong> "+result["total_vesting_fund_steem"]+" <br /><strong>Total vesting shares</strong> "+result["total_vesting_shares"]+" <br /><strong>Virtual supply</strong> "+result["virtual_supply"]+" <br/><strong>Current reserve ratio</strong> "+result["current_reserve_ratio"];
       $("#supplystats").html(supplystatshtml);
    }
    });
  $('#refreshstats').fadeIn();
}

function followvotepoptab(url) {
  var win = window.open(url, '_blank');
}

function postview(content) {
  $('#postviewer-content').html(md.render(content));
  document.getElementById('postviewer').style.display="block";
  $('#postviewer').fadeIn();
}


function closePost() {
 $('#postviewer').fadeOut();
}

function streamtx(txType,txData) {
      switch(txType) {
        case 'vote':
          if (txData.author.startsWith("bm-") && bmtoggle==false){break;}
          votepercent = txData.weight / 100;
          if (txData.weight >= '-1'){ votestring = '<i class="fa fa-chevron-circle-up" style="color:#4ba2f2" aria-hidden="true"></i>';
          } else if (txData.weight == '0') {  votestring = '<i class="fa fa-chevron-circle-up" style="color:grey" aria-hidden="true"></i>';
          } else if (txData.weight == '1') {  votestring = '<i class="fa fa-chevron-circle-up" style="color:orange" aria-hidden="true"></i>';
          } else { votestring = '<i class="fa fa-flag" style="color:red" aria-hidden="true"></i>'; }
          rendertx('<div class="title"><small><a href="https://golos.io/@'+txData.voter+'">'+txData.voter+'</a> '+votestring+'</small><small style="color:#11922c !important;"> '+votepercent+' %</small> <small><a href="https://golos.io/@'+txData.author+'">'+txData.author+'</a></small></div><div class="undertitle"><small><a href="#" style="color:grey !important;" onClick="loadpost(\''+txData.author+'\',\''+txData.permlink+'\')">'+txData.permlink.substring(0,50)+'</a></small></div>',2);

          if (followthevotes == true) {
            if ($.inArray(txData.voter, followthevoters) != -1){
            // Voter is in the list of watchers
              if (votepercent >= 2) {
              // Only trigger on positive votes over 2% - allowing "symbolic" votes without spamming everyone
              var refurl = 'https://golos.io/golosviz-'+txData.voter+'/@'+txData.author+'/'+txData.permlink;
              var uniqueurl = 'https://golos.io/tag/@'+txData.author+'/'+txData.permlink;
                if ($.inArray(uniqueurl, followthevoteshistory) == -1) {
                // If a permlink has @user/re-  its a comment
                  if (txData.permlink.substring(0,2) == 're' || txData.permlink.substring(0,2) == '-re') {
                    if (followthecommentvotes == true) { followvotepoptab(refurl); followthevoteshistory.push(uniqueurl);}
                    } else {
                      followvotepoptab(refurl); followthevoteshistory.push(uniqueurl);
                    }
                }
              }
            }
          }

          break;
        case 'comment':
          if (txData.author.startsWith("bm-") && bmtoggle==false){break;}
          var postcontentfull = stripHTML(txData["body"]);
          var postcontentshort = postcontentfull.substring(0,250);
          if (txData.json_metadata != "") {
            postjson = JSON.parse(txData.json_metadata);
            if (postjson.hasOwnProperty("tags")) {
              tagstring = '<small><a href="https://golos.io/created/'+stripHTML(postjson.tags[0])+'" target="_blank"><i class="fa fa-tags" aria-hidden="true" style="color:brown;"></i> '+stripHTML(postjson.tags[0])+'</a> ..</small>';
              postcontentshort = postcontentshort+'<br>'+tagstring;
              if (followthetags == true) {
                $.each(postjson.tags, function( index, value ){
                if ($.inArray(value, defaultfollowthetags) !== -1) {
                  if (txData.title != '') {
                    popurl = "https://golos.io/golosviz-tag-"+value+"/@"+txData["author"]+"/"+txData["permlink"];
                    console.log("followed tag "+value)
                    followvotepoptab(popurl);
                    return false;
                  }
                }
                });
              }
            }
          if (postjson.hasOwnProperty("links")) {
                    postlink = '<small><a href="'+postjson.links[0]+'" target="_blank"><i class="fa fa-link" aria-hidden="true" style="color:grey;"></i> '+stripHTML(postjson.links[0].substring(8,30))+'</a> ..</small>';
                    postcontentshort = postcontentshort+' '+postlink;
                  }
                  if (postjson.hasOwnProperty("image") && showimages == true) {
                    if (imageproxystatus == false) {backgroundimage = postjson.image[0];} else {backgroundimage = imageproxy+'100x100/'+postjson.image[0];}
                    postimage = '<a href="https://golos.io/'+txData.parent_permlink+'/@'+txData.author+'/'+txData.permlink+'" target="_blank"><img src="'+backgroundimage+'" class="postimage"></a>'
                    postimagelink = '  <small><a href="'+stripHTML(postjson.image[0])+'" target="_blank"><i class="fa fa-camera" style="color:black;"> </i> '+stripHTML(postjson.image[0].substring(8,30))+'</a> ..</small>';
                    postcontentshort = postimage+postcontentshort+postimagelink;
                  }
                }

                if (postcontentfull.substring(0,2) == "@@") {rendertx('<div class="title"><i class="fa fa-pencil-square-o" style="color:orange;" aria-hidden="true"></i><strong><small style="color:orange;"> </small></strong> <a href="https://golos.io/@'+txData.author+'" target="_blank" class="user">'+txData.author+' <i class="fa fa-commenting-o" style="color:grey;" aria-hidden="true"></i> '+txData.parent_author+'</a></div><div class="undertitle"><small>on '+txData.permlink.substring(0,70)+'</small><br />'+postcontentshort+'</div>',3);break;}

                if(txData.title == '' || txData.title.substring(0,4) == "Re: ") {
                  title = '<div class="title"><a href="http://golos.io/tag/@'+txData.author+'/'+txData.permlink+'" target="_blank" class="user">'+txData.author+' <i class="fa fa-commenting-o" style="color:grey;" aria-hidden="true"></i> '+txData.parent_author+'</a></div>';
                  subtitle = '<div class="undertitle"><small>on <a href="#" onClick="loadpost(\''+txData.author+'\',\''+txData.permlink+'\')" class="user">'+txData.permlink.substring(0,70)+'</a></small><br />'+postcontentshort+'</div>';
                  rendertx(title+' '+subtitle,3);
                  break;
                }

                if (txData.title != '') {
                  title = '<div class="title"><i class="fa fa-newspaper-o" style="color:purple;" aria-hidden="true"></i> <a href="http://golos.io/@'+txData.author+'" target="_blank" class="user">'+txData.author+'</a></div>';
                  subtitle = '<div class="undertitle"><a href="#" onClick="loadpost(\''+txData.author+'\',\''+txData.permlink+'\');">'+stripHTML(txData.title)+'</a><br /><blockquote>'+postcontentshort+'</blockquote></div>';
                  rendertx(title+' '+subtitle,1);

                   // Optional preview of all new posts
                  if (postpreview == true) {
                    postcontentformatted = '<center><h3><a href="https://golos.io/'+txData.parent_permlink+'/@'+txData.author+'/'+txData.permlink+'" target="_blank">'+txData.title+' <i class="fa fa-external-link" aria-hidden="true" style="color: #1a5099;"></i></a>&nbsp;</h3></center>\n';
                    postcontentformatted += '<center>Posted by <a href="https://golos.io/@'+txData.author+'"><img src="https://img.steemconnect.com/@'+txData['author']+'?size=50" class="avatar"> '+txData.author+'</a> in <a href="https://golos.io/created/'+txData.parent_permlink+'">'+txData.parent_permlink+'</a></center><br />';
                    postcontentformatted += sanitize(txData.body);
                    postview(postcontentformatted);
                  }
                }



          break;
        case 'transfer':
           if (txData.to == 'null') {
            title = '<div class="title"><strong style="color:gold;"><i class="fa fa-star" aria-hidden="true"></i> Paid Promotion</strong> <small>'+txData.amount+' by</small> <a href="https://steemit.com/@'+txData.from+'" target="_blank">'+txData.from+'</a></div>',
            subtitle = '<div class="undertitle"><a href="https://steemit.com/undefined/'+txData.memo+'" target="_blank">'+stripHTML(txData.memo)+'</a></div>',
            rendertx(title+' '+subtitle,1);
            } else {
              title = '<div class="title"><i class="fa fa-exchange" style="color:#11922c" aria-hidden="true" alt="Market Trades"></i> <small>'+txData.amount+'</small> from <a href="http://steemit.com/@'+txData.from+'" target="_blank" class="user">'+txData.from+'</a> to <a href="http://steemit.com/@'+txData.to+'" target="_blank" class="user">'+txData.to+'</a></div>',
              subtitle = '<div class="undertitle"><blockquote>'+stripHTML(txData.memo)+'</blockquote></div>',
              rendertx(title+' '+subtitle,4);
            }
          break;
          case 'account_create':
            rendertx('<div class="title"><i class="fa fa-user-plus" style="color:blue" aria-hidden="true"></i> <a href="http://golos.io/@'+txData.new_account_name+'" target="_blank" class="user">'+txData.new_account_name+'</a></div>',4);
            AccountCount++;
            $("#statsAccountCount").html(AccountCount);
          break;

          case 'limit_order_create':
            if (txData.owner.startsWith("bm-") && bmtoggle==false){break;}
            limitorderowner = txData.owner;
            limitordersell = txData.amount_to_sell.split(" ");
            limitorderbuy = txData.min_to_receive.split(" ");
            limitorderselltype = limitordersell[1];
            limitordersellamount = limitordersell[0];
            limitorderbuytype = limitorderbuy[1];
            limitorderbuyamount = limitorderbuy[0]
            if (limitorderselltype == 'STEEM') {
              limitorderprice = limitorderbuyamount / limitordersellamount;
            } else {
              limitorderprice = limitordersellamount / limitorderbuyamount;
            }
            if (limitorderprice < limitorderlastprice){
              limitordercolor = "red";
            } else if (limitorderprice > limitorderlastprice) {
              limitordercolor = "green";
            } else {
              limitordercolor = "grey";
            }
            limitorderstring = '<a href="https://golos.io/@'+limitorderowner+'">'+limitorderowner+'</a> offers '+limitordersellamount+' '+limitorderselltype+' at $<span style="color:'+limitordercolor+';">'+limitorderprice.toFixed(8)+'</span>';
            rendertx('<div class="title"><i class="fa fa-balance-scale" style="color:purple" aria-hidden="true" alt="Market Trades"></i> <small>'+limitorderstring+'</div>',4);
            limitorderlastprice = limitorderprice;
          break;

          case 'account_update':
            if (txData.author.startsWith("bm-") && bmtoggle==false){break;}
            rendertx('<div class="title"><i class="fa fa-key" style="color:red;" aria-hidden="true"></i>  <a href="http://golosdb.com/@'+txData.account+'" target="_blank" class="user">'+txData.account+'</a></div>',4);
          break;

          case 'limit_order_cancel':
            rendertx('<div class="title"><i class="fa fa-ban" style="color:red;" aria-hidden="true"></i> <a href="http://golos.io/@'+txData.owner+'" target="_blank" class="user">'+txData.owner+'</a> <small>cancelled '+txData.orderid+'</small></div>',4);
          break;

          case 'pow':
            rendertx('<div class="title"><i class="fa fa-cube" aria-hidden="true"></i> <a href="http://golos.io/@'+txData.worker_account+'" target="_blank" class="user">'+txData.worker_account+'</a></div>',4);
          break;

          case 'pow2':
            sbdinterest = txData.props['sbd_interest_rate'] / 100;
            title = '<div class="title"><i class="fa fa-cube" aria-hidden="true" style="color:brown;"> </i> <a href="http://golos.io/@'+txData.work[1].input['worker_account']+'" target="_blank" class="user">'+txData.work[1].input['worker_account']+'</a></div>',
            subtitle = '<div class="undertitle">'+txData.props['account_creation_fee']+' acct fee , max blocksize '+txData.props['maximum_block_size']+' & '+sbdinterest+' % SBD interest</div>',
            rendertx(title+' '+subtitle,4);
          break;

          case 'account_witness_vote':
            if (txData.approve == true) {
              voteDirection = '<i class="fa fa-check" style="color:green;"> </i>';
            } else {
            voteDirection = '<i class="fa fa-times" style="color:red;"> </i>';
            }
            rendertx('<div class="title"><a href="https://golos.io/@'+txData.account+'" target="_blank">'+txData.account+'</a> '+voteDirection+' <a href="https://golos.io/@'+txData.witness+'" target="_blank">'+txData.witness+'</a></div>',4);
          break;

          case 'custom_json':
            if (txData.id == "follow") {
              customjson = JSON.parse(txData.json);
              if (customjson[0] == "follow") {
                if (customjson[1].what == '') {
                  rendertx('<div class="title"><a href="https://golos.io/@'+customjson[1].follower+'/" target="_blank">'+customjson[1].follower+'</a> <img src="unfollow.png" alt="Unfollowing" border="0" style="vertical-align:middle;"> <a href="https://golos.io/@'+customjson[1].following+'" target="_blank">'+customjson[1].following+'</a></div>',2);
                } else if (customjson[1].what == 'blog') {
                  rendertx('<div class="title"><a href="https://golos.io/@'+customjson[1].follower+'/" target="_blank">'+customjson[1].follower+'</a> <img src="follow.png" alt="Following" border="0" style="vertical-align:middle;"> <a href="https://golos.io/@'+customjson[1].following+'" target="_blank">'+customjson[1].following+'</a></div>',2);
                } else if (customjson[1].what == 'ignore') {
                  rendertx('<div class="title"><a href="https://golos.io/@'+customjson[1].follower+'/" target="_blank">'+customjson[1].follower+'</a> <i class="fa fa-low-vision" style="color:red;" aria-hidden="true"></i> <a href="https://golos.io/@'+customjson[1].following+'" target="_blank">'+customjson[1].following+'</a></div>',2);
                }
              }
              if (customjson[0] == "reblog") {
                rendertx('<div class="title"><a href="https://golos.io/@'+customjson[1].account+'/" target="_blank">'+customjson[1].account+'</a> <span style="vertical-align:middle; display: inline-block; width: 1.12rem; height: 1.12rem;" class="Icon reblog"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M448,192l-128,96v-64H128v128h248c4.4,0,8,3.6,8,8v48c0,4.4-3.6,8-8,8H72c-4.4,0-8-3.6-8-8V168c0-4.4,3.6-8,8-8h248V96 L448,192z"></path></svg></span> <a href="https://golos.io/@'+customjson[1].author+'" target="_blank">'+customjson[1].author+'</a></div><div class="undertitle"><a href="#" onClick="loadpost(\''+customjson[1].author+'\',\''+customjson[1].permlink+'\');">'+customjson[1].permlink+'</a></div>',3);
              }
            } else {
              console.log('custom json operation');
              console.log(txData);
            }
          break;

          case 'withdraw_vesting':
            if (txData.vesting_shares == "0.000000 VESTS") {
              withdrawvestmessage = "Cancelled Powerdown";
            } else {
              withdrawvestmessage = 'Powerdown '+txData.vesting_shares+'';
            }
            rendertx('<div class="title"><i class="fa fa-eject" style="color:red;"> </i> <a href="https://golos.io/@'+txData.account+'" target="_blank">'+txData.account+'</a> <small>'+withdrawvestmessage+'</small></div>',4);
          break;

          case 'convert':
            rendertx('<div class="title"><i class="fa fa-recycle" style="color:orange;" aria-hidden="true"></i> <a href="https://golos.io/@'+txData.owner+'" target="_blank">'+txData.owner+'</a> <small>converted '+txData.amount+' to Steem</small></div>',4);
          break;

          case 'transfer_to_vesting':
            if (txData.from == txData.to) {
              rendertx('<div class="title"><img src="mushroom.png" style="padding:none; margin:none; position:relative;" vertical-align="middle"> Powerup <small>'+txData.amount+' by</small> <a href="https://golos.io/@'+txData.to+'" target="_blank">'+txData.to+'</a></div>',4);
            } else {
              rendertx('<div class="title"><img src="mushroom.png" style="padding:none; margin:none; position:relative;" vertical-align="middle"> Powerup <small>'+txData.amount+' for</small> <a href="https://golos.io/@'+txData.to+'" target="_blank">'+txData.to+'</a> by <a href="https://golos.io/@'+txData.from+'" target="_blank">'+txData.from+'</a></div>',4);
            }
          break;

          case 'delete_comment':
          rendertx('<div class="title"><i class="fa fa-ban" style="color:red;" aria-hidden="true"></i> <a href="https://golos.io/@'+txData.author+'" target="_blank">'+txData.author+'</a> deleted '+txData.permlink+'</div>',3);
          break;

          case 'feed_publish':
            rendertx('<div class="title"><i class="fa fa-line-chart" style="color:brown;" aria-hidden="true"></i> <small>"'+txData.exchange_rate.base+' per Steem" reports </small><a href="https://golos.io/@'+txData.publisher+'" target="_blank">'+txData.publisher+'</a></div>',4);
          break;

          case 'transfer_to_savings':
            rendertx('<div class="title"><i class="fa fa-university" style="color:black;" aria-hidden="true"></i> <small><a href="https://golos.io/@'+txData.to+'">'+txData.to+' deposited '+txData.amount+' in savings </small></div>',4);
          break;

          case 'transfer_from_savings':
            rendertx('<div class="title"><i class="fa fa-university" style="color:black;" aria-hidden="true"></i> <small><a href="https://golos.io/@'+txData.to+'">'+txData.to+' withdrew '+txData.amount+' from savings </small></div>',4);
          break;

          case 'witness_update':
            sbdinterest = txData.props['sbd_interest_rate'] / 100;
            title = '<div class="title"><i class="fa fa-key" aria-hidden="true" style="color:red;"> </i> <a href="http://golos.io/@'+txData.owner+'" target="_blank" class="user">'+txData.owner+'</a></div>',
            subtitle = '<div class="undertitle">'+txData.props['account_creation_fee']+' acct fee , max blocksize '+txData.props['maximum_block_size']+' & '+sbdinterest+' % GBD interest</div>',
            rendertx(title+' '+subtitle,4);
          break;

          case 'claim_reward_balance':
            var claim='';
            if (txData['reward_gbd']!='0.000 GBD') {claim+=txData['reward_gbd']+' ';}
            if (txData['reward_golos']!='0.000 STEEM') {claim+=txData['reward_golos']+' ';}
            if (txData['reward_gests']!='0.000 GESTS') {claim+=txData['reward_gests'];}
            rendertx('<div class="title"><i class="fa fa-money" aria-hidden="true" style="color:green;"></i> <a href="https://golos.io/@'+txData['account']+'">'+txData['account']+'</a> <small>claimed '+claim+'</small></div>',4);
          break;

          case 'account_create_with_delegation':
            rendertx('<div class="title"><i class="fa fa-user-plus" style="color:blue" aria-hidden="true"></i> <a href="http://golos.io/@'+txData.new_account_name+'" target="_blank" class="user">'+txData.new_account_name+'</a> created by <a href="https://golos.io/@'+txData['creator']+'">'+txData['creator']+'</a></div>',4);
            AccountCount++;
            $("#statsAccountCount").html(AccountCount);
          break;

          default:
            //console.log(txType);
            //console.log(txData);
          break;
      }

    }

    function rendertx(txString,column) {
      containerhead = '<div class="columnitem">';
      containerfoot = '</div>';
      container = containerhead+txString+containerfoot;
      $('#column'+column).prepend(container);
      $('#column'+column).fadeIn("slow");
    }

    function loadpost(author,permlink){
      steem.api.getContent(author, permlink, function(err, result) {
        if (result['title']==''){result['title']='Comment on '+result['parent_permlink'];}
        postcontentformatted = '<center><h3><a href="https://golos.io/'+result['parent_permlink']+'/@'+result['author']+'/'+result['permlink']+'" target="_blank">'+result['title']+' <i class="fa fa-external-link" aria-hidden="true" style="color: #1a5099;"></i></a>&nbsp;</h3></center>\n';
        postcontentformatted += '<center>Posted by <a href="https://golos.io/@'+result['author']+'"> '+result['author']+'</a> in <a href="https://golos.io/created/'+result['category']+'">'+result['category']+'</a> - '+readtime(result['body'])+'</center><br />';
        postcontentformatted += sanitize(result['body']);
        postview(postcontentformatted);
      });
    }

    function sanitize(str){
      var yturl= /(?:<a href\=\":?)?(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([\w\-]{10,12})(?:&feature=related)?(?:[\w\-]{0}:?)?(?:">:?)?(?:\<\/a\>:?)?/g;
      var ytplayer= '\n<iframe width="640" height="360" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>\n';
      var imgregex=/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif)(?!["\)]))/i
      var imgregexreplace = '\!\[\]($1)';
      str=str.replace(yturl, ytplayer);
      str=str.replace(imgregex,imgregexreplace);
      str=md.render(str);
      return str;
    }
    function postpreview(post) {var txt=post.replace(/ +/g,' ');var max_words=15;var words = 0;var preview='';for (let i = 0;i<txt.length; i++) {var char = txt.charAt(i);if (char === '.') break;if (char === ' ' || char === '\n') {words++;if(words>max_words)break;if (i>30) break;};preview += char;}return preview;}

    $(document).ready(function() {
      $('#column1').prepend('<div class="columnheader" style="display:none;"><div class="title"><i class="fa fa-newspaper-o" style="color:purple;" aria-hidden="true"></i> <i class="fa fa-star" style="color:gold;" aria-hidden="true"></i></div></div>');
      $("#column1").find("div.columnheader:first").fadeIn("slow");
      $('#column2').prepend('<div class="columnheader" style="display:none;"><i class="fa fa-chevron-circle-up" style="color:#4ba2f2" aria-hidden="true"></i> <i class="fa fa-chevron-circle-up" style="color:grey;" aria-hidden="true"></i> <i class="fa fa-flag" style="color:red" aria-hidden="true"> <i class="fa fa-low-vision" style="color:red;" aria-hidden="true"></i> <img src="follow.png" style="vertical-align:middle;"><img src="unfollow.png" style="vertical-align:middle;"> </div></div>');
      $("#column2").find("div.columnheader:first").fadeIn("slow");
      $('#column3').prepend('<div class="columnitem" style="display:none;"><div class="title"><div class="title"><i class="fa fa-check" style="color:green;"> </i> <i class="fa fa-times" style="color:red;"> </i> <i class="fa fa-commenting-o" style="color:grey;" aria-hidden="true"></i> <i class="fa fa-pencil-square-o" style="color:orange;" aria-hidden="true"></i> <i class="fa fa-ban" style="color:red" aria-hidden="true"></i> <span style="vertical-align:middle; display: inline-block; width: 1.12rem; height: 1.12rem;" class="Icon reblog"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M448,192l-128,96v-64H128v128h248c4.4,0,8,3.6,8,8v48c0,4.4-3.6,8-8,8H72c-4.4,0-8-3.6-8-8V168c0-4.4,3.6-8,8-8h248V96 L448,192z" class="reblog"></path></svg></span></div></div>');
      $("#column3").find("div.columnitem:first").fadeIn("slow");
      $('#column4').prepend('<div class="columnitem" style="display:none;"><div class="title"><img src="mushroom.png" alt="" style="margin-bottom:-2px; vertical-align="bottom"> <i class="fa fa-cube" aria-hidden="true" style="color:brown;"></i> <i class="fa fa-key" style="color:red" aria-hidden="true"></i> <i class="fa fa-user-plus" style="color:blue" aria-hidden="true"></i> <i class="fa fa-balance-scale" style="color:purple" aria-hidden="true" alt="Market Trades"></i> <i class="fa fa-exchange" style="color:#11922c" aria-hidden="true" alt="Transaction/Transfer"></i> <i class="fa fa-line-chart" style="color:brown;" aria-hidden="true"></i> <i class="fa fa-recycle" style="color:orange;" aria-hidden="true"></i> <i class="fa fa-eject" style="color:red;"> <i class="fa fa-university" style="color:black;" aria-hidden="true"></i> <i class="fa fa-money" aria-hidden="true" style="color:green;" alt="Claim reward balance"></i></div></div>');
      $("#column4").find("div.columnitem:first").fadeIn("slow");
      var postviewer = document.getElementById('postviewer');
      var closepostviewer = document.getElementById("closepostviewer");
      closepostviewer.onclick = function() {$('#postviewer').style.display = "none";}
      window.onclick = function(event) {if (event.target == postviewer) {postviewer.style.display = "none";}}
      getstats();
      var tx = Function.prototype;
      tx = steem.api.streamOperations(function onOperation(error, operation) {
        if (error) throw error;
        var txType = operation[0];
        var txData = operation[1];
        streamtx(txType,txData);
      });

    });
</script>
</head><body>
<div id="outerContainer">
    <div id="column1"> </div> <div id="column2"> </div> <div id="column3"> </div> <div id="column4"> </div>
</div>
<div id="followthevotesconfigscreen">
  <div id="followthevotesconfigclose" style="display:block;position:absolute;right:5px;top:5px;"> <a href="#" onclick="followthevotesconfigclose();" style="color:red;">  <i class="fa fa-times hovergrow" aria-hidden="true"> </i></a> </div>
  <center><strong>Realtime golos blockchain viewer and curation tool</strong></center>
  <i class="fa fa-newspaper-o" style="color:purple;" aria-hidden="true" title="New Post"> </i> <i class="fa fa-star" style="color:gold;" title="New Promotion" aria-hidden="true"> </i> <i class="fa fa-chevron-circle-up" title="Upvote" style="color:#4ba2f2" aria-hidden="true"> </i> <i class="fa fa-chevron-circle-up" title="Unvote" style="color:grey;" aria-hidden="true"> </i> <i class="fa fa-flag" style="color:red" title="Downvote" aria-hidden="true"> </i> <i class="fa fa-low-vision" title="Mute" style="color:red;" aria-hidden="true"> </i> <img src="follow.png" title="Follow" style="vertical-align:middle;"> <img src="unfollow.png" title="Unfollow" style="vertical-align:middle;"> <i class="fa fa-check" title="Approve witness" style="color:green;"> </i> <i class="fa fa-times" title="Dissaprove witness" style="color:red;"> </i> <i class="fa fa-commenting-o" title="New comment" style="color:grey;" aria-hidden="true"> </i> <i class="fa fa-pencil-square-o" title="Edit" style="color:orange;" aria-hidden="true"> </i> <i class="fa fa-ban" title="Deletion" style="color:red" aria-hidden="true"> </i> <span style="vertical-align:middle; display: inline-block; width: 1.12rem; height: 1.12rem;" class="Icon reblog" title="Resteem" ><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M448,192l-128,96v-64H128v128h248c4.4,0,8,3.6,8,8v48c0,4.4-3.6,8-8,8H72c-4.4,0-8-3.6-8-8V168c0-4.4,3.6-8,8-8h248V96 L448,192z" class="reblog"></path></svg></span> <img src="mushroom.png" title="Powerup" style="margin-bottom:-2px; vertical-align="bottom"> <i class="fa fa-cube" aria-hidden="true" style="color:brown;" title="New block"></i> <i class="fa fa-key" title="Account update" style="color:red" aria-hidden="true"></i> <i class="fa fa-user-plus" title="New user"  style="color:blue" aria-hidden="true"></i> <i class="fa fa-balance-scale" title="Market Trade" style="color:purple" aria-hidden="true" title="Market Trades"></i> <i class="fa fa-exchange" style="color:#11922c" aria-hidden="true" title="Transaction/Transfer"></i> <i class="fa fa-line-chart" title="Witness price feed" style="color:brown;" aria-hidden="true"> </i> <i class="fa fa-recycle" title="SBD Conversion request" style="color:orange;" aria-hidden="true"> </i> <i class="fa fa-eject" style="color:red;" title="Powerdown"> </i> <i class="fa fa-university" style="color:black;" title="Savings" aria-hidden="true"></i><i class="fa fa-money" aria-hidden="true" style="color:green;" alt="Claim reward balance"></i><br />
  <div style="float:left;text-align:left;padding:10px;">
  <center><h3>Settings</h3></center>
  <p><span onclick="showimagestoggle()"><i class="fa fa-toggle-on hovergrow" id="showimagestoggle" aria-hidden="true"> </i> Show Images <i class="fa fa-camera hovergrow" style="color:black;" aria-hidden="true"> </i></span> <a href="#" onclick="emergencypurge();" style="color:red !important;"><i class="fa fa-exclamation-triangle hovergrow" aria-hidden="true" title="Disable image display and purge current images"> </i></a></span></p>
  <p><span onclick="imageproxytoggle();"> <i class="fa fa-toggle-on hovergrow" id="imageproxytoggle" aria-hidden="true"></i></span> Image Proxy </small></p>
  <p><span onclick="followthevotestoggle()"> <i class="fa fa-toggle-off hovergrow" id="followthevotestoggle2" aria-hidden="true"></i></span> Follow the Votes </p>
  <p><span onclick="followthecommentvotestoggle()"><i class="fa fa-toggle-off hovergrow" id="followthecommentvotestoggle" aria-hidden="true"> </i> Follow comment votes</span></p>
  <p><span onclick="postpreviewtoggle()"><i class="fa fa-toggle-off hovergrow" id="postpreviewtoggle" area-hidden="true"> </i> Automatically view new posts <small style="color:green;" >New<i class="fa fa-exclamation" aria-hidden="true"></i></small></span></p>
  <p><span onclick="bmtoggler()"><i class="fa fa-toggle-off hovergrow" id="bmtoggle" aria-hidden="true"> </i> Show Bizness Molodost activity</span></p>
    <div id="followtagscontainer">
    <span onclick="followthetagstoggle()"><i class="fa fa-toggle-off hovergrow" id="followthetagstoggle2" aria-hidden="true"> </i></span> Follow the Tags <form onsubmit="event.preventDefault();followthetagsaddtag();"><input type="text" value="add tag" id="followthetagsaddtaginput"> <a href="#" onclick="followthetagsclearlist();" style="color:red;" title="Clear list"><i class="fa fa-trash hovergrow" aria-hidden="true"> </i></a></form>
    <div id="followthevotesconfigscreentaglist"> </div>
  </div>
  <center><p><a href="#" onclick="followthevoteslisthistory()"><i class="fa fa-history" aria-hidden="true"></i> Show history of followed votes</a></p></center>
  <!-- <center><form onsubmit="event.preventDefault();setuser();"><input type="text" value="your username" id="setuserinput" style="display:none;"></form></center> -->
  <center><h3>Statistics <a href="#" onClick="getstats();$('#refreshstats').fadeOut;"><i class="fa fa-refresh hovergrow" aria-hidden="true" id="refreshstats"></i></a></h3></center>
  <div id="stats">
    <i class="fa fa-users" aria-hidden="true"></i> <strong>Registered accounts </strong><span id="statsAccountCount"></span><br />
    <span id="blocknumber"> </span> <span id="currentwitness"> </span> <br />
    <span id="timestamp"> </span><br />
    <div id="supplystats"></div>
      <script language="JavaScript">
      var fhs = document.createElement('script');var fhs_id = "5378485";
      var ref = (''+document.referrer+'');var pn =  window.location;var w_h = window.screen.width + " x " + window.screen.height;
      fhs.src = "https://s1.freehostedscripts.net/ocounter.php?site="+fhs_id+"&e1=Online User&e2=Online Users&r="+ref+"&m=0&wh="+w_h+"&a=1&pn="+pn+"";
      document.head.appendChild(fhs);document.write("<i class='fa fa-users' aria-hidden='true' style='color:blue;'>&nbsp;&nbsp;  </i><span id='o_"+fhs_id+"'></span>");
      </script>
    </div>

</div>
  <div id="userlistcontainer">
    <center><h3>Vote Following:</h3> <form onsubmit="event.preventDefault();followthevotesadduser();"><input type="text" value="add user" id="followthevotesadduserinput">  <a href="#" onclick="followthevotesclearlist();" style="color:red;" title="Clear list"><i class="fa fa-trash hovergrow" aria-hidden="true"> </i></a>  <a href="#" onclick="followthevotesrestoredefaults();" style="color:blue;" title="Return follower list to default"> <i class="fa fa-eraser hovergrow" aria-hidden="true"> </i></a> </form></center>
    <div id="followthevotesconfigscreenuserlist"> </div>
  </div>
</div>
<div id="followthevoteshistorycontainer">

</div>
<div id="votehistorycontainer">
  <div id="votehistoryholder"></div>
</div>
<div id="focuscontent"></div>
<div id="steemvizlogo"><div id="followthevotes" style="color:#228DFF;"><span onclick="followthevotesconfigopen();"><i class="fa fa-cogs hovergrow" aria-hidden="true"></i></span></div><a href="https://steemit.com/@ausbitbank" class="steemvizlogotext" target="_blank" id="settingstoggle" alt="Created by @ausbitbank - view my steemit profile">GolosViz</a></div>
<div id="postviewer" class="modal"><span id="closepostviewer" class="closebutton"><i class="fa fa-times hovergrow" aria-hidden="true"> </i></span><div class="modal-content" id="postviewer-content"></div></div>
</body></html>
